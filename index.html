<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>CodePen - #curiouslyminded</title>
  <link rel="stylesheet" href="./style.css">

</head>
<body>
<!-- partial:index.partial.html -->
<div id="shadercollab"></div>
<script id="vertex" type="x-shader/x-vertex">
    varying vec2 texCoordVarying;
      void main() {
          texCoordVarying = uv;
          gl_Position =   projectionMatrix *
                          modelViewMatrix *
                          vec4(position,1.0);
      }
</script>
<script id="vertex" type="x-shader/x-vertex">
    void main() { gl_Position = vec4(position, 1.0); }
</script>
<script id="copy" type="x-shader/x-vertex">
  varying vec2 texCoordVarying;
  uniform sampler2D channel0;
    
  #define PI 3.1415926535897932384626433832795
  vec2 rotate(vec2 v, float a) {
	return  mat2(cos(a), -sin(a), sin(a), cos(a))*v;
  }

  void main() {
  vec4 inText = texture2D(channel0,texCoordVarying);
  gl_FragColor = inText;
  
  }

</script>
<script id="frag" type="x-shader/x-vertex">
  uniform sampler2D webcam;
  uniform sampler2D backbuffer;
  uniform float time;
  uniform float resoluton;

  varying vec2 texCoordVarying;
  uniform vec2 resolution;

  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 hsv2rgb(vec3 c) {
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
  }
  precision highp float;
    
  #define M_PI 3.1415926535897932384626433832795

  void main() {
  vec2 pixel = texCoordVarying; vec3 finalColor;
  vec3 webcamCapture = texture2D(webcam,pixel).rgb;
  vec3 lastFrame = texture2D(backbuffer,pixel).rgb;

  finalColor=mix(webcamCapture, lastFrame,.5);
  gl_FragColor = vec4(finalColor,1.);
}
</script>
<!-- partial -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js'></script>
<script  src="script.js"></script>

</body>
</html>
